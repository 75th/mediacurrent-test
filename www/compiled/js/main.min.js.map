{"version":3,"sources":["../../src/js/main.js"],"names":["$","document","querySelector","bind","$$","querySelectorAll","$body","colorIcon","innerHTML","concat","manualColorMode","colorModeSwitch","toDark","arguments","length","undefined","manualSwitch","transitionDuration","transitionDurationCSS","localStorage","setItem","$$buttons","forEach","$button","disabled","style","setProperty","classList","add","remove","setTimeout","addEventListener","prefersDark","getItem","darkModeMQ","matchMedia","matches","addListener","e"],"mappings":"aAAA,IAAIA,EAAIC,SAASC,cAAcC,KAAKF,UAChCG,GAAKH,SAASI,iBAAiBF,KAAKF,WAExC,WACC,IAAIK,EAAQN,EAAE,QAEVO,EAAY,oMAGhBP,EAAE,mBAAmBQ,UAArB,2BAAAC,OAC4BF,EAD5B,qDAAAE,OACyFF,EADzF,oCAMA,IAAIG,GAAkB,EAWlBC,EAAkB,WAAmE,IAAlEC,IAAkEC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,KAAAA,UAAA,GAAnDG,IAAmDH,UAAAC,OAAA,QAAAC,IAAAF,UAAA,KAAAA,UAAA,GAClFI,GADkFJ,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAjBG,GAC/B,IAAM,EACxCE,EAAqB,GAAAT,OAAMQ,EAAN,MAExBD,IACFN,GAAkB,EAClBS,aAAaC,QAAQ,cAAeR,IAIrC,IAAMS,EAAYjB,GAAG,uBACrBiB,EAAUC,QAAQ,SAACC,GAAcA,EAAQC,UAAW,IAGpDlB,EAAMmB,MAAMC,YAAY,wBAAyBR,GAGjDZ,EAAMqB,UAAUC,IAAI,iBACpBtB,EAAMqB,UAAUE,OAAOjB,EAAS,QAAU,QAC1CN,EAAMqB,UAAUC,IAAIhB,EAAS,OAAS,SAGtCkB,WACC,WACCxB,EAAMqB,UAAUE,OAAO,iBACvBvB,EAAMmB,MAAMC,YAAY,wBAAyB,MACjDL,EAAUC,QAAQ,SAACC,GAAcA,EAAQC,UAAW,KAErDP,IAKFjB,EAAE,kBAAkB+B,iBAAiB,QAAS,WAAQpB,GAAgB,KACtEX,EAAE,mBAAmB+B,iBAAiB,QAAS,WAAQpB,GAAgB,KAGvE,IAAIqB,EAAcb,aAAac,QAAQ,eAKvC,GAAmB,QAHnBD,EAA8B,UAAhBA,IAAkD,SAAhBA,GAAgC,OAI/ErB,EAAgBqB,GAAa,OACvB,CAEN,IAAME,EAAaC,WAAW,gCAC9BxB,EAAgBuB,EAAWE,SAAS,GAIpCF,EAAWG,YAAY,SAACC,GACnB5B,GACHC,EAAgB2B,EAAEF,SAAS,GAAO,MA5EtC","sourcesContent":["var $ = document.querySelector.bind(document);\nvar $$ = document.querySelectorAll.bind(document);\n\n(() => {\n\tvar $body = $('body');\n\n\tvar colorIcon = '<svg height=\"30\" viewBox=\"0 0 30 30\" width=\"30\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m15 0a15 15 0 1 0 15 15 15 15 0 0 0 -15-15zm0 1.76a13.24 13.24 0 0 1 0 26.48z\" fill=\"#003954\"/></svg>';\n\n\t// Add color mode buttons\n\t$('div.color-modes').innerHTML =\n\t\t`<button class=\"to-dark\">${colorIcon}<span>Dark Mode</button><button class=\"to-light\">${colorIcon}<span>Light Mode</span></button>`\n\t;\n\n\t// Keep track of whether the user has manually chosen a color scheme,\n\t// so we can stop monitoring the OS setting in the middle of a session.\n\tvar manualColorMode = false;\n\n\t/**\n\t * Handle all aspects of switching color modes.\n\t *\n\t * @param {bool} toDark - If true, switch to Dark Mode; if false, Light Mode.\n\t * @param {bool} manualSwitch - If true, the user manually chose a mode by clicking; if false, we're switching for another reason.\n\t * @param {bool} transition - Whether or not to use a transition duration for this switch\n\t *\n\t * @return {undefined}\n\t */\n\tvar colorModeSwitch = (toDark = true, manualSwitch = true, transition = manualSwitch) => {\n\t\tconst transitionDuration = transition ? 500 : 0;\n\t\tconst transitionDurationCSS = `${transitionDuration}ms`;\n\n\t\tif(manualSwitch) {\n\t\t\tmanualColorMode = true;\n\t\t\tlocalStorage.setItem('prefersDark', toDark);\n\t\t}\n\n\t\t// Disable mode buttons during transition\n\t\tconst $$buttons = $$('.color-modes button');\n\t\t$$buttons.forEach(($button) => { $button.disabled = true });\n\n\t\t// Temporarily adjust transition duration\n\t\t$body.style.setProperty('--transition-duration', transitionDurationCSS);\n\n\t\t// Toggle classes\n\t\t$body.classList.add('mode-shifting');\n\t\t$body.classList.remove(toDark ? 'light' : 'dark');\n\t\t$body.classList.add(toDark ? 'dark' : 'light');\n\n\t\t// Clean up after switch completes\n\t\tsetTimeout(\n\t\t\t() => {\n\t\t\t\t$body.classList.remove('mode-shifting');\n\t\t\t\t$body.style.setProperty('--transition-duration', '0s');\n\t\t\t\t$$buttons.forEach(($button) => { $button.disabled = false });\n\t\t\t},\n\t\t\ttransitionDuration\n\t\t);\n\t};\n\n\t// Attach listeners to color mode buttons\n\t$('button.to-dark').addEventListener('click', () => { colorModeSwitch(true); });\n\t$('button.to-light').addEventListener('click', () => { colorModeSwitch(false); });\n\n\t// Fetch user's manual color preference from storage\n\tvar prefersDark = localStorage.getItem('prefersDark');\n\t// Local storage only stores strings, not booleans\n\tprefersDark = prefersDark === 'false' ? false : prefersDark === 'true' ? true : null;\n\n\t// Apply user's manual preference if one exists\n\tif(prefersDark !== null) {\n\t\tcolorModeSwitch(prefersDark, false);\n\t} else {\n\t\t// If no manual preference, use OS settings\n\t\tconst darkModeMQ = matchMedia('(prefers-color-scheme: dark)');\n\t\tcolorModeSwitch(darkModeMQ.matches, false);\n\n\t\t// Respond to changes in OS setting, unless the user has manually\n\t\t// selected a mode during this page load\n\t\tdarkModeMQ.addListener((e) => {\n\t\t\tif(!manualColorMode) {\n\t\t\t\tcolorModeSwitch(e.matches, false, true);\n\t\t\t}\n\t\t});\n\t}\n})();\n"]}
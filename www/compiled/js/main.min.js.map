{"version":3,"sources":["../../src/js/main.js"],"names":["$","document","querySelector","bind","$$","querySelectorAll","$body","innerHTML","manualColorMode","colorModeSwitch","toDark","arguments","length","undefined","manualSwitch","transitionDuration","transitionDurationCSS","concat","localStorage","setItem","$$buttons","forEach","$button","disabled","style","setProperty","classList","add","remove","setTimeout","addEventListener","prefersDark","getItem","darkModeMQ","matchMedia","matches","addListener","e"],"mappings":"aAAA,IAAIA,EAAIC,SAASC,cAAcC,KAAKF,UAChCG,GAAKH,SAASI,iBAAiBF,KAAKF,WAExC,WACC,IAAIK,EAAQN,EAAE,QAEdA,EAAE,mBAAmBO,UACpB,4GAKD,IAAIC,GAAkB,EAElBC,EAAkB,WAAmE,IAAlEC,IAAkEC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,KAAAA,UAAA,GAAnDG,IAAmDH,UAAAC,OAAA,QAAAC,IAAAF,UAAA,KAAAA,UAAA,GAClFI,GADkFJ,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAjBG,GAC/B,IAAM,EACxCE,EAAqB,GAAAC,OAAMF,EAAN,MAExBD,IACFN,GAAkB,EAClBU,aAAaC,QAAQ,cAAeT,IAIrC,IAAMU,EAAYhB,GAAG,uBACrBgB,EAAUC,QAAQ,SAACC,GAAcA,EAAQC,UAAW,IAEpDjB,EAAMkB,MAAMC,YAAY,wBAAyBT,GACjDV,EAAMoB,UAAUC,IAAI,iBAEpBrB,EAAMoB,UAAUE,OAAOlB,EAAS,QAAU,QAC1CJ,EAAMoB,UAAUC,IAAIjB,EAAS,OAAS,SAEtCmB,WACC,WACCvB,EAAMoB,UAAUE,OAAO,iBACvBtB,EAAMkB,MAAMC,YAAY,wBAAyB,MACjDL,EAAUC,QAAQ,SAACC,GAAcA,EAAQC,UAAW,KAErDR,IAIFf,EAAE,kBAAkB8B,iBAAiB,QAAS,WAAQrB,GAAgB,KACtET,EAAE,mBAAmB8B,iBAAiB,QAAS,WAAQrB,GAAgB,KAEvE,IAAIsB,EAAcb,aAAac,QAAQ,eAIvC,GAAmB,QAHnBD,EAA8B,UAAhBA,IAAkD,SAAhBA,GAAgC,OAI/EtB,EAAgBsB,GAAa,OACvB,CAEN,IAAME,EAAaC,WAAW,gCAC9BzB,EAAgBwB,EAAWE,SAAS,GAEpCF,EAAWG,YAAY,SAACC,GACnB7B,GACHC,EAAgB4B,EAAEF,SAAS,GAAO,MAxDtC","sourcesContent":["var $ = document.querySelector.bind(document);\nvar $$ = document.querySelectorAll.bind(document);\n\n(() => {\n\tvar $body = $('body');\n\n\t$('div.color-modes').innerHTML =\n\t\t'<button class=\"to-dark\"><span>Dark Mode</button><button class=\"to-light\"><span>Light Mode</span></button>'\n\t;\n\n\t// Keep track of whether the user has manually chosen a color scheme,\n\t// so we can stop monitoring the OS setting in the middle of a session.\n\tvar manualColorMode = false;\n\n\tvar colorModeSwitch = (toDark = true, manualSwitch = true, transition = manualSwitch) => {\n\t\tconst transitionDuration = transition ? 500 : 0;\n\t\tconst transitionDurationCSS = `${transitionDuration}ms`;\n\n\t\tif(manualSwitch) {\n\t\t\tmanualColorMode = true;\n\t\t\tlocalStorage.setItem('prefersDark', toDark);\n\t\t}\n\n\t\t// Disable mode buttons during transition\n\t\tconst $$buttons = $$('.color-modes button');\n\t\t$$buttons.forEach(($button) => { $button.disabled = true });\n\n\t\t$body.style.setProperty('--transition-duration', transitionDurationCSS);\n\t\t$body.classList.add('mode-shifting');\n\n\t\t$body.classList.remove(toDark ? 'light' : 'dark');\n\t\t$body.classList.add(toDark ? 'dark' : 'light');\n\n\t\tsetTimeout(\n\t\t\t() => {\n\t\t\t\t$body.classList.remove('mode-shifting');\n\t\t\t\t$body.style.setProperty('--transition-duration', '0s');\n\t\t\t\t$$buttons.forEach(($button) => { $button.disabled = false });\n\t\t\t},\n\t\t\ttransitionDuration\n\t\t);\n\t};\n\n\t$('button.to-dark').addEventListener('click', () => { colorModeSwitch(true); });\n\t$('button.to-light').addEventListener('click', () => { colorModeSwitch(false); });\n\n\tvar prefersDark = localStorage.getItem('prefersDark');\n\tprefersDark = prefersDark === 'false' ? false : prefersDark === 'true' ? true : null;\n\n\t// Remember the last manual selection foreeeeeevvverrrrr\n\tif(prefersDark !== null) {\n\t\tcolorModeSwitch(prefersDark, false);\n\t} else {\n\t\t// If no manual selection, use OS settings\n\t\tconst darkModeMQ = matchMedia('(prefers-color-scheme: dark)');\n\t\tcolorModeSwitch(darkModeMQ.matches, false);\n\n\t\tdarkModeMQ.addListener((e) => {\n\t\t\tif(!manualColorMode) {\n\t\t\t\tcolorModeSwitch(e.matches, false, true);\n\t\t\t}\n\t\t});\n\t}\n})();\n"]}